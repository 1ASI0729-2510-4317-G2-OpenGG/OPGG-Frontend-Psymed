<div class="container">
  <!-- Vista de Mis Pacientes -->
  <div *ngIf="currentView === 'patients'" class="patients-view">
    <div class="header">
      <h1>Mis Pacientes</h1>
      <p>Gestiona la informaci√≥n de tus pacientes</p>
    </div>

    <div class="patients-grid" *ngIf="patients.length > 0">
      <div *ngFor="let patient of patients" class="patient-card">
        <div class="patient-header">
          <div class="patient-avatar">
            {{ patient.name.charAt(0) }}
          </div>
          <div class="patient-info">
            <h3>{{ patient.name }}</h3>
            <p>{{ patient.age }} a√±os</p>
            <p>{{ patient.email }}</p>
          </div>
        </div>

        <div class="patient-stats">
          <div class="stat">
            <span class="stat-number">{{ patient.totalAppointments }}</span>
            <span class="stat-label">Citas</span>
          </div>
          <div class="stat">
            <span class="stat-number">{{ patient.lastAppointment }}</span>
            <span class="stat-label">√öltima cita</span>
          </div>
          <div class="stat">
            <span class="stat-number">{{ patient.prescriptions }}</span>
            <span class="stat-label">Prescripciones</span>
          </div>
        </div>

        <div class="patient-actions">
          <button class="btn-action btn-primary" (click)="viewPatientHistory(patient)">
            üìã Historial
          </button>
          <button class="btn-action btn-secondary" (click)="createPrescription(patient)">
            üíä Nueva Prescripci√≥n
          </button>
        </div>
      </div>
    </div>

    <div *ngIf="patients.length === 0" class="empty-state">
      <div class="empty-icon">üë•</div>
      <h2>No tienes pacientes asignados</h2>
      <p>Los pacientes aparecer√°n aqu√≠ cuando tengas citas programadas</p>
    </div>
  </div>

  <!-- Vista de Prescripciones -->
  <div *ngIf="currentView === 'prescriptions'" class="prescriptions-view">
    <div class="header">
      <h1>Gesti√≥n de Prescripciones</h1>
      <p>Crea y gestiona las prescripciones m√©dicas de tus pacientes</p>
    </div>

    <div class="prescriptions-list" *ngIf="prescriptions.length > 0">
      <div *ngFor="let prescription of prescriptions" class="prescription-card">
        <div class="prescription-header">
          <div class="patient-info">
            <h3>{{ prescription.patientName }}</h3>
            <p>{{ prescription.getFormattedDate() }}</p>
          </div>
          <div class="prescription-status">
            <span class="medication-count">{{ prescription.getTotalMedications() }} medicamentos</span>
          </div>
        </div>

        <div class="prescription-content">
          <div class="diagnosis">
            <strong>Diagn√≥stico:</strong> {{ prescription.diagnosis }}
          </div>

          <div class="medications">
            <h4>Medicamentos:</h4>
            <div class="medication-list">
              <div *ngFor="let medication of prescription.medications" class="medication-item">
                <div class="medication-name">{{ medication.name }}</div>
                <div class="medication-details">{{ medication.getFormattedDosage() }}</div>
                <div class="medication-instructions">{{ medication.instructions }}</div>
              </div>
            </div>
          </div>

          <div class="instructions" *ngIf="prescription.instructions">
            <strong>Instrucciones generales:</strong>
            <p>{{ prescription.instructions }}</p>
          </div>
        </div>

        <div class="prescription-actions">
          <button class="btn-action btn-primary" (click)="editPrescription(prescription)">
            ‚úèÔ∏è Editar
          </button>
          <button class="btn-action btn-secondary" (click)="duplicatePrescription(prescription)">
            üìã Duplicar
          </button>
        </div>
      </div>
    </div>

    <div *ngIf="prescriptions.length === 0" class="empty-state">
      <div class="empty-icon">üíä</div>
      <h2>No tienes prescripciones</h2>
      <p>Las prescripciones que crees aparecer√°n aqu√≠</p>
    </div>
  </div>

  <!-- Vista por defecto (Gesti√≥n de M√©dicos) -->
  <div *ngIf="currentView === 'default'" class="medics-view">
    <div class="header">
      <h1>Gesti√≥n de M√©dicos</h1>
      <button class="btn-primary" (click)="onCreateMedic()">Nuevo M√©dico</button>
    </div>

    <div class="loading" *ngIf="isLoading">
      <p>Cargando m√©dicos...</p>
    </div>

    <div class="medics-grid" *ngIf="!isLoading && medics.length > 0">
      <div *ngFor="let medic of medics" class="medic-card">
        <div class="medic-header">
          <h3>Dr. {{ medic.firstName }} {{ medic.lastName }}</h3>
          <p>Especialidad: {{ medic.specialty }}</p>
          <p>Email: {{ medic.email }}</p>
          <p>Tel√©fono: {{ medic.phone }}</p>
                     <p>Experiencia: {{ medic.experienceLevel }} ({{ medic.yearsOfExperience }} a√±os)</p>
          <p>Tarifa: ${{ medic.consultationFee }}</p>
        </div>

        <div class="medic-actions">
          <button class="btn-action btn-secondary" (click)="onEditMedic(medic)">Editar</button>
          <button class="btn-action btn-danger" (click)="onDeleteMedic(medic)">Eliminar</button>
        </div>
      </div>
    </div>

    <div *ngIf="!isLoading && medics.length === 0" class="empty-state">
      <div class="empty-icon">üë®‚Äç‚öïÔ∏è</div>
      <h2>No hay m√©dicos registrados</h2>
      <p>Agrega m√©dicos para comenzar a gestionar el sistema</p>
    </div>
  </div>
</div>
